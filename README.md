# go-pict

![GitHub tag (latest SemVer)](https://img.shields.io/github/v/tag/cybergarage/go-pict)
[![test](https://github.com/cybergarage/go-pict/actions/workflows/make.yml/badge.svg)](https://github.com/cybergarage/go-pict/actions/workflows/make.yml)
[![Go Reference](https://pkg.go.dev/badge/github.com/cybergarage/go-pict.svg)](https://pkg.go.dev/github.com/cybergarage/go-pict)
[![codecov](https://codecov.io/gh/cybergarage/go-pict/graph/badge.svg?token=GOLCBMUVB1)](https://codecov.io/gh/cybergarage/go-pict)

`go-pict` is a Go parser for [PICT](https://github.com/microsoft/pict) (Pairwise Independent Combinatorial Testing) output. It parses tab-separated test case data generated by the PICT tool and provides easy access to parameters and test case values with type conversion support.

## Features

- **PICT Output Parser**: Parse tab-separated PICT output with a simple API
- **Flexible Input**: Parse from string, reader, or file
- **Type Conversion**: Automatically cast test case values to Go types (int, string, bool, float, etc.)

## Usage

### Installation

```bash
go get github.com/cybergarage/go-pict
```

### Basic Example

```go
package main

import (
    "fmt"
    "github.com/cybergarage/go-pict/pict"
)

func main() {
    // PICT output (tab-separated)
    pictString := 
        "bool\tstring\tint\n" +
        "true\ta\t1\n" +
        "false\tb\t2\n"

    // Parse PICT output
    parser := pict.NewParserWithString(pictString)
    if err := parser.Parse(); err != nil {
        panic(err)
    }

    // Get parameters (column names)
    for _, param := range parser.Params() {
        fmt.Printf("%v ", param.Name())
    }
    fmt.Println()

    // Get test cases
    for _, testCase := range parser.Cases() {
        for _, elem := range testCase {
            fmt.Printf("%v ", elem)
        }
        fmt.Println()
    }
}
```

### Type Conversion

```go
parser := pict.NewParserWithString(pictString)
parser.Parse()

// Get parameters with type information
params := parser.Params()

// Process each test case with type conversion
for _, testCase := range parser.Cases() {
    for i, elem := range testCase {
        // Convert parameter name to Type
        paramType, err := params[i].Type()
        if err != nil {
            continue
        }
        
        // Cast element to the specified type
        value, err := elem.CastTo(paramType)
        if err != nil {
            continue
        }
        
        fmt.Printf("%v (%T) ", value, value)
    }
    fmt.Println()
}
```

## PICT Output Format

`go-pict` parses the output generated by [microsoft/pict](https://github.com/microsoft/pict). PICT generates test cases in a tab-separated format:

```
Parameter1	Parameter2	Parameter3
Value1A	Value2A	Value3A
Value1B	Value2B	Value3B
```

### Example PICT Model

Create a PICT model file (e.g., `test.pict`):

```
# Parameters and their values
OS: Windows, Linux, macOS
Browser: Chrome, Firefox, Safari
Version: 1.0, 2.0
```

### Generate Test Cases

Run PICT to generate test cases:

```bash
pict test.pict > test-cases.txt
```

This produces tab-separated output:

```
OS	Browser	Version
Windows	Chrome	1.0
Linux	Firefox	2.0
macOS	Safari	1.0
...
```

### Parse with go-pict

```go
import "github.com/cybergarage/go-pict/pict"

// Parse from file
parser := pict.NewParserWithFile("test-cases.txt")
if err := parser.Parse(); err != nil {
    panic(err)
}

// Process test cases
for _, testCase := range parser.Cases() {
    // Each testCase contains values for OS, Browser, Version
    fmt.Println(testCase)
}
```

## References

- [Pairwise Testing | Combinatorial Test Case Generation](https://www.pairwise.org/)
- [microsoft/pict: Pairwise Independent Combinatorial Tool](https://github.com/microsoft/pict)
